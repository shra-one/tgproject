"use strict";

$(document).ready(function () {
  $(window).resize(function () {
    stickyCTA();

    if ($(".search-filter-top").length > 0) {
      calcSerchFilterHeight();
    }
  }); //bootstrap modals

  $(document).on("hidden.bs.modal", function () {
    if ($(".modal.show").length) {
      $("body").addClass("modal-open");
    }
  }); //auto complete

  if ($(".js-autocomplete").length > 0) {
    var options = {
      data: ["blue", "green", "pink", "red", "yellow"]
    };
    $(".js-autocomplete").easyAutocomplete(options);
  } //radio checked codition for upload video or link video


  $(".js-radio-toggle").on("click", function () {
    var input = $(this).find("input");
    var targetDiv = input.attr("data-target");
    $(this).closest(".card").find(".js-radio-toggle-results").hide();

    if (input.is(":checked")) {
      $("#" + targetDiv).show();
    }
  });

  if ($(".js-radio-toggle").length > 0) {
    $(".js-radio-toggle").each(function () {
      if ($(this).find("input").is(":checked")) {
        var targetDiv = $(this).find("input").attr("data-target");
        $("#" + targetDiv).show();
        console.log(targetDiv);
      }
    });
  } //lightobx for images


  if ($(".lightbox").length > 0) {
    var $gallery = new SimpleLightbox(".lightbox", {});
  } // $(".js-property-video").lightGallery();
  // lightGallary


  if ($(".lg-gallary").length > 0) {
    $(".lg-gallary").lightGallery({
      selector: ".js-lightGallary-selector",
      share: false,
      zoom: false
    });
  }

  if ($(".lg-morePhotos").length > 0) {
    $(".lg-morePhotos").lightGallery({
      selector: ".item",
      share: false,
      zoom: false
    });
  } // poplular propertise


  if ($(".js-property-carousel-mobile").length > 0) {
    $(".js-property-carousel-mobile").slick({
      infinite: false,
      slidesToShow: 1.2,
      slidesToScroll: 1,
      arrows: false,
      centerMode: false,
      variableWidth: false,
      centerPadding: "60px",
      nextArrow: "<button class=\"carousel-arrow slick-next\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M6.0001 7.2L12.0001 13.2L18.0001 7.2L20.4001 8.4L12.0001 16.8L3.6001 8.4L6.0001 7.2Z\"  />\n      </svg></button>\n      ",
      prevArrow: "<button class=\"carousel-arrow slick-prev\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M6.0001 7.2L12.0001 13.2L18.0001 7.2L20.4001 8.4L12.0001 16.8L3.6001 8.4L6.0001 7.2Z\"  />\n      </svg></button>\n      ",
      mobileFirst: true,
      responsive: [{
        breakpoint: 767,
        settings: "unslick"
      }]
    });
  } //check parent and check its children checkbox


  $(".js-parentCheckBox").click(function () {
    $(this).parents(".properties-lists").find(".js-childCheckBox").prop("checked", this.checked);
  }); //clicking the last unchecked or checked checkbox should check or uncheck the parent checkbox

  $(".js-childCheckBox").click(function () {
    var parentContainer = ".properties-lists";
    var parentCheckbox = ".js-parentCheckBox";
    if ($(this).parents(parentContainer).find(parentCheckbox).prop("checked") == true && this.checked == false) $(this).parents(parentContainer).find(parentCheckbox).prop("checked", false);

    if (this.checked == true) {
      var flag = true;
      $(this).parents(parentContainer).find(".js-childCheckBox").each(function () {
        if (this.checked == false) flag = false;
      });
      $(this).parents(parentContainer).find(parentCheckbox).prop("checked", flag);
    }
  }); //property detail page: description show more/less

  var showChar = 300; // How many characters are shown by default

  var ellipsestext = "...";
  var moretext = "Show more >";
  var lesstext = "Show less";
  $(".more").each(function () {
    var content = $(this).html();

    if (content.length > showChar) {
      var c = content.substr(0, showChar);
      var h = content.substr(showChar, content.length - showChar);
      var html = c + '<span class="moreellipses">' + ellipsestext + '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink">' + moretext + "</a></span>";
      $(this).html(html);
    }
  });
  $(".morelink").click(function () {
    if ($(this).hasClass("less")) {
      $(this).removeClass("less");
      $(this).html(moretext);
    } else {
      $(this).addClass("less");
      $(this).html(lesstext);
    }

    $(this).parent().prev().toggle();
    $(this).prev().toggle();
    return false;
  }); // chart : price history

  if ($("#priceChart").length > 0) {
    var ctx = document.getElementById("priceChart");
    var myChart = new Chart(ctx, {
      type: "line",
      aspectRatio: 2,
      data: {
        labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
        datasets: [{
          label: "Price",
          data: [12, 19, 3, 5, 2, 3, 18, 20, 16, 19, 20, 20],
          backgroundColor: "#A6CEE3",
          borderColor: "#4062BB",
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        }
      }
    });
  }

  function stickyCTA() {
    if ($(window).width() >= 768) {
      if ($(".property-detail-wrapper").length > 0) {
        if ($(window).scrollTop() >= $(".property-detail-wrapper").offset().top + $(".property-detail-wrapper").outerHeight() - window.innerHeight) {
          $(".fixed-cta").addClass("position-static");
        } else {
          $(".fixed-cta").removeClass("position-static");
        }
      }
    }
  }

  $(window).on("scroll", function () {
    stickyCTA();
  }); //show hdie link

  var showhide = false;
  $(".js-showhide-link").on("click", function () {
    var target = $(this).attr("data-target");
    console.log(target);
    $(this).toggleClass("showhide-link--has-shown");

    if (showhide === false) {
      $("#" + target).removeClass("collapse");
      $("#" + target).slideDown();
      showhide = true;
    } else {
      $("#" + target).addClass("collapse");
      $("#" + target).slideUp();
      showhide = false;
    }
  }); //drag and drop file using dropzone plugin

  if ($("#preview-template").length > 0) {
    var previewNode = document.querySelector("#preview-template");
    previewNode.id = "";
    var previewTemplate = previewNode.parentNode.innerHTML;
  }

  if ($("#dropcontainer").length > 0) {
    var myDropzone = new Dropzone(document.getElementById("dropcontainer"), {
      // Make the whole body a dropzone
      url: "/target-url",
      // Set the url
      thumbnailWidth: 150,
      thumbnailHeight: 150,
      parallelUploads: 20,
      previewTemplate: previewTemplate,
      autoQueue: false,
      // Make sure the files aren't queued until manually added
      previewsContainer: ".dragndrop-images",
      // Define the container to display the previews
      // clickable: ".filesUpload", // Define the element that should be used as click trigger to select files.
      init: function init() {
        this.on("thumbnail", function (file, dataUrl) {
          $(".js-lightGallary-selector").attr("href", dataUrl);
          $(".lg-gallary").lightGallery({
            selector: ".js-lightGallary-selector",
            share: false,
            zoom: false
          });
        });
      }
    });
  } //search page map toggle


  $(".js-mapViewer").on("click", function () {
    $("body").toggleClass("is-map-visible");
  });

  function calcSerchFilterHeight() {
    var filterHeight = $(".search-filter-top").outerHeight();
    console.log(filterHeight);
    $(":root").css("--filterHeight", filterHeight + "px");
  }

  if ($(".search-filter-top").length > 0) {
    calcSerchFilterHeight();
  }

  if ($("#tokenField").length > 0) {
    $("#tokenField").tokenfield();
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJ3aW5kb3ciLCJyZXNpemUiLCJzdGlja3lDVEEiLCJsZW5ndGgiLCJjYWxjU2VyY2hGaWx0ZXJIZWlnaHQiLCJvbiIsImFkZENsYXNzIiwib3B0aW9ucyIsImRhdGEiLCJlYXN5QXV0b2NvbXBsZXRlIiwiaW5wdXQiLCJmaW5kIiwidGFyZ2V0RGl2IiwiYXR0ciIsImNsb3Nlc3QiLCJoaWRlIiwiaXMiLCJzaG93IiwiZWFjaCIsImNvbnNvbGUiLCJsb2ciLCIkZ2FsbGVyeSIsIlNpbXBsZUxpZ2h0Ym94IiwibGlnaHRHYWxsZXJ5Iiwic2VsZWN0b3IiLCJzaGFyZSIsInpvb20iLCJzbGljayIsImluZmluaXRlIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJhcnJvd3MiLCJjZW50ZXJNb2RlIiwidmFyaWFibGVXaWR0aCIsImNlbnRlclBhZGRpbmciLCJuZXh0QXJyb3ciLCJwcmV2QXJyb3ciLCJtb2JpbGVGaXJzdCIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJjbGljayIsInBhcmVudHMiLCJwcm9wIiwiY2hlY2tlZCIsInBhcmVudENvbnRhaW5lciIsInBhcmVudENoZWNrYm94IiwiZmxhZyIsInNob3dDaGFyIiwiZWxsaXBzZXN0ZXh0IiwibW9yZXRleHQiLCJsZXNzdGV4dCIsImNvbnRlbnQiLCJodG1sIiwiYyIsInN1YnN0ciIsImgiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwicGFyZW50IiwicHJldiIsInRvZ2dsZSIsImN0eCIsImdldEVsZW1lbnRCeUlkIiwibXlDaGFydCIsIkNoYXJ0IiwidHlwZSIsImFzcGVjdFJhdGlvIiwibGFiZWxzIiwiZGF0YXNldHMiLCJsYWJlbCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlckNvbG9yIiwiYm9yZGVyV2lkdGgiLCJzY2FsZXMiLCJ5QXhlcyIsInRpY2tzIiwiYmVnaW5BdFplcm8iLCJ3aWR0aCIsInNjcm9sbFRvcCIsIm9mZnNldCIsInRvcCIsIm91dGVySGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJzaG93aGlkZSIsInRhcmdldCIsInRvZ2dsZUNsYXNzIiwic2xpZGVEb3duIiwic2xpZGVVcCIsInByZXZpZXdOb2RlIiwicXVlcnlTZWxlY3RvciIsImlkIiwicHJldmlld1RlbXBsYXRlIiwicGFyZW50Tm9kZSIsImlubmVySFRNTCIsIm15RHJvcHpvbmUiLCJEcm9wem9uZSIsInVybCIsInRodW1ibmFpbFdpZHRoIiwidGh1bWJuYWlsSGVpZ2h0IiwicGFyYWxsZWxVcGxvYWRzIiwiYXV0b1F1ZXVlIiwicHJldmlld3NDb250YWluZXIiLCJpbml0IiwiZmlsZSIsImRhdGFVcmwiLCJmaWx0ZXJIZWlnaHQiLCJjc3MiLCJ0b2tlbmZpZWxkIl0sIm1hcHBpbmdzIjoiOztBQUVBQSxDQUFBLENBQUFDLFFBQUEsQ0FBQSxDQUFBQyxLQUFBLENBQUEsWUFBQTtBQUdBRixFQUFBQSxDQUFBLENBQUFHLE1BQUEsQ0FBQSxDQUFBQyxNQUFBLENBQUEsWUFBQTtBQUVBQyxJQUFBQSxTQUFBOztBQUNBLFFBQUFMLENBQUEsQ0FBQSxvQkFBQSxDQUFBLENBQUFNLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQUMsTUFBQUEscUJBQUE7QUFDQTtBQUNBLEdBTkEsRUFIQSxDQVdBOztBQUVBUCxFQUFBQSxDQUFBLENBQUFDLFFBQUEsQ0FBQSxDQUFBTyxFQUFBLENBQUEsaUJBQUEsRUFBQSxZQUFBO0FBQ0EsUUFBQVIsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxDQUFBTSxNQUFBLEVBQUE7QUFDQU4sTUFBQUEsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBUyxRQUFBLENBQUEsWUFBQTtBQUNBO0FBQ0EsR0FKQSxFQWJBLENBd0JBOztBQUNBLE1BQUFULENBQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUFNLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxRQUFBSSxPQUFBLEdBQUE7QUFDQUMsTUFBQUEsSUFBQSxFQUFBLENBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUE7QUFEQSxLQUFBO0FBR0FYLElBQUFBLENBQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUFZLGdCQUFBLENBQUFGLE9BQUE7QUFDQSxHQTlCQSxDQWdDQTs7O0FBRUFWLEVBQUFBLENBQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUFRLEVBQUEsQ0FBQSxPQUFBLEVBQUEsWUFBQTtBQUNBLFFBQUFLLEtBQUEsR0FBQWIsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBYyxJQUFBLENBQUEsT0FBQSxDQUFBO0FBQ0EsUUFBQUMsU0FBQSxHQUFBRixLQUFBLENBQUFHLElBQUEsQ0FBQSxhQUFBLENBQUE7QUFDQWhCLElBQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQWlCLE9BQUEsQ0FBQSxPQUFBLEVBQUFILElBQUEsQ0FBQSwwQkFBQSxFQUFBSSxJQUFBOztBQUNBLFFBQUFMLEtBQUEsQ0FBQU0sRUFBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0FuQixNQUFBQSxDQUFBLENBQUEsTUFBQWUsU0FBQSxDQUFBLENBQUFLLElBQUE7QUFDQTtBQUNBLEdBUEE7O0FBUUEsTUFBQXBCLENBQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUFNLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQU4sSUFBQUEsQ0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQXFCLElBQUEsQ0FBQSxZQUFBO0FBQ0EsVUFBQXJCLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQWMsSUFBQSxDQUFBLE9BQUEsRUFBQUssRUFBQSxDQUFBLFVBQUEsQ0FBQSxFQUFBO0FBQ0EsWUFBQUosU0FBQSxHQUFBZixDQUFBLENBQUEsSUFBQSxDQUFBLENBQUFjLElBQUEsQ0FBQSxPQUFBLEVBQUFFLElBQUEsQ0FBQSxhQUFBLENBQUE7QUFDQWhCLFFBQUFBLENBQUEsQ0FBQSxNQUFBZSxTQUFBLENBQUEsQ0FBQUssSUFBQTtBQUNBRSxRQUFBQSxPQUFBLENBQUFDLEdBQUEsQ0FBQVIsU0FBQTtBQUNBO0FBQ0EsS0FOQTtBQU9BLEdBbERBLENBbURBOzs7QUFDQSxNQUFBZixDQUFBLENBQUEsV0FBQSxDQUFBLENBQUFNLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxRQUFBa0IsUUFBQSxHQUFBLElBQUFDLGNBQUEsQ0FBQSxXQUFBLEVBQUEsRUFBQSxDQUFBO0FBQ0EsR0F0REEsQ0F1REE7QUFDQTs7O0FBQ0EsTUFBQXpCLENBQUEsQ0FBQSxhQUFBLENBQUEsQ0FBQU0sTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBTixJQUFBQSxDQUFBLENBQUEsYUFBQSxDQUFBLENBQUEwQixZQUFBLENBQUE7QUFDQUMsTUFBQUEsUUFBQSxFQUFBLDJCQURBO0FBRUFDLE1BQUFBLEtBQUEsRUFBQSxLQUZBO0FBR0FDLE1BQUFBLElBQUEsRUFBQTtBQUhBLEtBQUE7QUFLQTs7QUFFQSxNQUFBN0IsQ0FBQSxDQUFBLGdCQUFBLENBQUEsQ0FBQU0sTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBTixJQUFBQSxDQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBMEIsWUFBQSxDQUFBO0FBQ0FDLE1BQUFBLFFBQUEsRUFBQSxPQURBO0FBRUFDLE1BQUFBLEtBQUEsRUFBQSxLQUZBO0FBR0FDLE1BQUFBLElBQUEsRUFBQTtBQUhBLEtBQUE7QUFLQSxHQXZFQSxDQXlFQTs7O0FBQ0EsTUFBQTdCLENBQUEsQ0FBQSw4QkFBQSxDQUFBLENBQUFNLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQU4sSUFBQUEsQ0FBQSxDQUFBLDhCQUFBLENBQUEsQ0FBQThCLEtBQUEsQ0FBQTtBQUNBQyxNQUFBQSxRQUFBLEVBQUEsS0FEQTtBQUVBQyxNQUFBQSxZQUFBLEVBQUEsR0FGQTtBQUdBQyxNQUFBQSxjQUFBLEVBQUEsQ0FIQTtBQUlBQyxNQUFBQSxNQUFBLEVBQUEsS0FKQTtBQUtBQyxNQUFBQSxVQUFBLEVBQUEsS0FMQTtBQU1BQyxNQUFBQSxhQUFBLEVBQUEsS0FOQTtBQU9BQyxNQUFBQSxhQUFBLEVBQUEsTUFQQTtBQVFBQyxNQUFBQSxTQUFBLG9TQVJBO0FBWUFDLE1BQUFBLFNBQUEsb1NBWkE7QUFnQkFDLE1BQUFBLFdBQUEsRUFBQSxJQWhCQTtBQWlCQUMsTUFBQUEsVUFBQSxFQUFBLENBQ0E7QUFDQUMsUUFBQUEsVUFBQSxFQUFBLEdBREE7QUFHQUMsUUFBQUEsUUFBQSxFQUFBO0FBSEEsT0FEQTtBQWpCQSxLQUFBO0FBeUJBLEdBcEdBLENBc0dBOzs7QUFDQTNDLEVBQUFBLENBQUEsQ0FBQSxvQkFBQSxDQUFBLENBQUE0QyxLQUFBLENBQUEsWUFBQTtBQUNBNUMsSUFBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUNBNkMsT0FEQSxDQUNBLG1CQURBLEVBRUEvQixJQUZBLENBRUEsbUJBRkEsRUFHQWdDLElBSEEsQ0FHQSxTQUhBLEVBR0EsS0FBQUMsT0FIQTtBQUlBLEdBTEEsRUF2R0EsQ0E4R0E7O0FBQ0EvQyxFQUFBQSxDQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBNEMsS0FBQSxDQUFBLFlBQUE7QUFDQSxRQUFBSSxlQUFBLEdBQUEsbUJBQUE7QUFDQSxRQUFBQyxjQUFBLEdBQUEsb0JBQUE7QUFDQSxRQUNBakQsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBNkMsT0FBQSxDQUFBRyxlQUFBLEVBQUFsQyxJQUFBLENBQUFtQyxjQUFBLEVBQUFILElBQUEsQ0FBQSxTQUFBLEtBQ0EsSUFEQSxJQUVBLEtBQUFDLE9BQUEsSUFBQSxLQUhBLEVBS0EvQyxDQUFBLENBQUEsSUFBQSxDQUFBLENBQ0E2QyxPQURBLENBQ0FHLGVBREEsRUFFQWxDLElBRkEsQ0FFQW1DLGNBRkEsRUFHQUgsSUFIQSxDQUdBLFNBSEEsRUFHQSxLQUhBOztBQUlBLFFBQUEsS0FBQUMsT0FBQSxJQUFBLElBQUEsRUFBQTtBQUNBLFVBQUFHLElBQUEsR0FBQSxJQUFBO0FBQ0FsRCxNQUFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQ0E2QyxPQURBLENBQ0FHLGVBREEsRUFFQWxDLElBRkEsQ0FFQSxtQkFGQSxFQUdBTyxJQUhBLENBR0EsWUFBQTtBQUNBLFlBQUEsS0FBQTBCLE9BQUEsSUFBQSxLQUFBLEVBQUFHLElBQUEsR0FBQSxLQUFBO0FBQ0EsT0FMQTtBQU1BbEQsTUFBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUNBNkMsT0FEQSxDQUNBRyxlQURBLEVBRUFsQyxJQUZBLENBRUFtQyxjQUZBLEVBR0FILElBSEEsQ0FHQSxTQUhBLEVBR0FJLElBSEE7QUFJQTtBQUNBLEdBekJBLEVBL0dBLENBMElBOztBQUVBLE1BQUFDLFFBQUEsR0FBQSxHQUFBLENBNUlBLENBNElBOztBQUNBLE1BQUFDLFlBQUEsR0FBQSxLQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBLGFBQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUEsV0FBQTtBQUVBdEQsRUFBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBcUIsSUFBQSxDQUFBLFlBQUE7QUFDQSxRQUFBa0MsT0FBQSxHQUFBdkQsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBd0QsSUFBQSxFQUFBOztBQUVBLFFBQUFELE9BQUEsQ0FBQWpELE1BQUEsR0FBQTZDLFFBQUEsRUFBQTtBQUNBLFVBQUFNLENBQUEsR0FBQUYsT0FBQSxDQUFBRyxNQUFBLENBQUEsQ0FBQSxFQUFBUCxRQUFBLENBQUE7QUFDQSxVQUFBUSxDQUFBLEdBQUFKLE9BQUEsQ0FBQUcsTUFBQSxDQUFBUCxRQUFBLEVBQUFJLE9BQUEsQ0FBQWpELE1BQUEsR0FBQTZDLFFBQUEsQ0FBQTtBQUVBLFVBQUFLLElBQUEsR0FDQUMsQ0FBQSxHQUNBLDZCQURBLEdBRUFMLFlBRkEsR0FHQSwrQ0FIQSxHQUlBTyxDQUpBLEdBS0EsaURBTEEsR0FNQU4sUUFOQSxHQU9BLGFBUkE7QUFVQXJELE1BQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQXdELElBQUEsQ0FBQUEsSUFBQTtBQUNBO0FBQ0EsR0FuQkE7QUFxQkF4RCxFQUFBQSxDQUFBLENBQUEsV0FBQSxDQUFBLENBQUE0QyxLQUFBLENBQUEsWUFBQTtBQUNBLFFBQUE1QyxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE0RCxRQUFBLENBQUEsTUFBQSxDQUFBLEVBQUE7QUFDQTVELE1BQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQTZELFdBQUEsQ0FBQSxNQUFBO0FBQ0E3RCxNQUFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUF3RCxJQUFBLENBQUFILFFBQUE7QUFDQSxLQUhBLE1BR0E7QUFDQXJELE1BQUFBLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQVMsUUFBQSxDQUFBLE1BQUE7QUFDQVQsTUFBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBd0QsSUFBQSxDQUFBRixRQUFBO0FBQ0E7O0FBQ0F0RCxJQUFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE4RCxNQUFBLEdBQUFDLElBQUEsR0FBQUMsTUFBQTtBQUNBaEUsSUFBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBK0QsSUFBQSxHQUFBQyxNQUFBO0FBQ0EsV0FBQSxLQUFBO0FBQ0EsR0FYQSxFQXRLQSxDQW1MQTs7QUFDQSxNQUFBaEUsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxDQUFBTSxNQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQTJELEdBQUEsR0FBQWhFLFFBQUEsQ0FBQWlFLGNBQUEsQ0FBQSxZQUFBLENBQUE7QUFDQSxRQUFBQyxPQUFBLEdBQUEsSUFBQUMsS0FBQSxDQUFBSCxHQUFBLEVBQUE7QUFDQUksTUFBQUEsSUFBQSxFQUFBLE1BREE7QUFFQUMsTUFBQUEsV0FBQSxFQUFBLENBRkE7QUFHQTNELE1BQUFBLElBQUEsRUFBQTtBQUNBNEQsUUFBQUEsTUFBQSxFQUFBLENBQ0EsS0FEQSxFQUVBLEtBRkEsRUFHQSxLQUhBLEVBSUEsS0FKQSxFQUtBLEtBTEEsRUFNQSxLQU5BLEVBT0EsS0FQQSxFQVFBLEtBUkEsRUFTQSxLQVRBLEVBVUEsS0FWQSxFQVdBLEtBWEEsRUFZQSxLQVpBLENBREE7QUFlQUMsUUFBQUEsUUFBQSxFQUFBLENBQ0E7QUFDQUMsVUFBQUEsS0FBQSxFQUFBLE9BREE7QUFFQTlELFVBQUFBLElBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUZBO0FBR0ErRCxVQUFBQSxlQUFBLEVBQUEsU0FIQTtBQUlBQyxVQUFBQSxXQUFBLEVBQUEsU0FKQTtBQUtBQyxVQUFBQSxXQUFBLEVBQUE7QUFMQSxTQURBO0FBZkEsT0FIQTtBQTRCQWxFLE1BQUFBLE9BQUEsRUFBQTtBQUNBbUUsUUFBQUEsTUFBQSxFQUFBO0FBQ0FDLFVBQUFBLEtBQUEsRUFBQSxDQUNBO0FBQ0FDLFlBQUFBLEtBQUEsRUFBQTtBQUNBQyxjQUFBQSxXQUFBLEVBQUE7QUFEQTtBQURBLFdBREE7QUFEQTtBQURBO0FBNUJBLEtBQUEsQ0FBQTtBQXdDQTs7QUFFQSxXQUFBM0UsU0FBQSxHQUFBO0FBQ0EsUUFBQUwsQ0FBQSxDQUFBRyxNQUFBLENBQUEsQ0FBQThFLEtBQUEsTUFBQSxHQUFBLEVBQUE7QUFDQSxVQUFBakYsQ0FBQSxDQUFBLDBCQUFBLENBQUEsQ0FBQU0sTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLFlBQ0FOLENBQUEsQ0FBQUcsTUFBQSxDQUFBLENBQUErRSxTQUFBLE1BQ0FsRixDQUFBLENBQUEsMEJBQUEsQ0FBQSxDQUFBbUYsTUFBQSxHQUFBQyxHQUFBLEdBQ0FwRixDQUFBLENBQUEsMEJBQUEsQ0FBQSxDQUFBcUYsV0FBQSxFQURBLEdBRUFsRixNQUFBLENBQUFtRixXQUpBLEVBS0E7QUFDQXRGLFVBQUFBLENBQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQVMsUUFBQSxDQUFBLGlCQUFBO0FBQ0EsU0FQQSxNQU9BO0FBQ0FULFVBQUFBLENBQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQTZELFdBQUEsQ0FBQSxpQkFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUNBN0QsRUFBQUEsQ0FBQSxDQUFBRyxNQUFBLENBQUEsQ0FBQUssRUFBQSxDQUFBLFFBQUEsRUFBQSxZQUFBO0FBQ0FILElBQUFBLFNBQUE7QUFDQSxHQUZBLEVBaFBBLENBb1BBOztBQUNBLE1BQUFrRixRQUFBLEdBQUEsS0FBQTtBQUNBdkYsRUFBQUEsQ0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQVEsRUFBQSxDQUFBLE9BQUEsRUFBQSxZQUFBO0FBQ0EsUUFBQWdGLE1BQUEsR0FBQXhGLENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQWdCLElBQUEsQ0FBQSxhQUFBLENBQUE7QUFDQU0sSUFBQUEsT0FBQSxDQUFBQyxHQUFBLENBQUFpRSxNQUFBO0FBQ0F4RixJQUFBQSxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUF5RixXQUFBLENBQUEsMEJBQUE7O0FBQ0EsUUFBQUYsUUFBQSxLQUFBLEtBQUEsRUFBQTtBQUNBdkYsTUFBQUEsQ0FBQSxDQUFBLE1BQUF3RixNQUFBLENBQUEsQ0FBQTNCLFdBQUEsQ0FBQSxVQUFBO0FBQ0E3RCxNQUFBQSxDQUFBLENBQUEsTUFBQXdGLE1BQUEsQ0FBQSxDQUFBRSxTQUFBO0FBQ0FILE1BQUFBLFFBQUEsR0FBQSxJQUFBO0FBQ0EsS0FKQSxNQUlBO0FBQ0F2RixNQUFBQSxDQUFBLENBQUEsTUFBQXdGLE1BQUEsQ0FBQSxDQUFBL0UsUUFBQSxDQUFBLFVBQUE7QUFDQVQsTUFBQUEsQ0FBQSxDQUFBLE1BQUF3RixNQUFBLENBQUEsQ0FBQUcsT0FBQTtBQUNBSixNQUFBQSxRQUFBLEdBQUEsS0FBQTtBQUNBO0FBQ0EsR0FiQSxFQXRQQSxDQXFRQTs7QUFDQSxNQUFBdkYsQ0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQU0sTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBLFFBQUFzRixXQUFBLEdBQUEzRixRQUFBLENBQUE0RixhQUFBLENBQUEsbUJBQUEsQ0FBQTtBQUNBRCxJQUFBQSxXQUFBLENBQUFFLEVBQUEsR0FBQSxFQUFBO0FBQ0EsUUFBQUMsZUFBQSxHQUFBSCxXQUFBLENBQUFJLFVBQUEsQ0FBQUMsU0FBQTtBQUNBOztBQUNBLE1BQUFqRyxDQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBTSxNQUFBLEdBQUEsQ0FBQSxFQUFBO0FBQ0EsUUFBQTRGLFVBQUEsR0FBQSxJQUFBQyxRQUFBLENBQUFsRyxRQUFBLENBQUFpRSxjQUFBLENBQUEsZUFBQSxDQUFBLEVBQUE7QUFDQTtBQUNBa0MsTUFBQUEsR0FBQSxFQUFBLGFBRkE7QUFFQTtBQUNBQyxNQUFBQSxjQUFBLEVBQUEsR0FIQTtBQUlBQyxNQUFBQSxlQUFBLEVBQUEsR0FKQTtBQUtBQyxNQUFBQSxlQUFBLEVBQUEsRUFMQTtBQU1BUixNQUFBQSxlQUFBLEVBQUFBLGVBTkE7QUFPQVMsTUFBQUEsU0FBQSxFQUFBLEtBUEE7QUFPQTtBQUNBQyxNQUFBQSxpQkFBQSxFQUFBLG1CQVJBO0FBUUE7QUFDQTtBQUNBQyxNQUFBQSxJQUFBLEVBQUEsZ0JBQUE7QUFDQSxhQUFBbEcsRUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBbUcsSUFBQSxFQUFBQyxPQUFBLEVBQUE7QUFDQTVHLFVBQUFBLENBQUEsQ0FBQSwyQkFBQSxDQUFBLENBQUFnQixJQUFBLENBQUEsTUFBQSxFQUFBNEYsT0FBQTtBQUNBNUcsVUFBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxDQUFBMEIsWUFBQSxDQUFBO0FBQ0FDLFlBQUFBLFFBQUEsRUFBQSwyQkFEQTtBQUVBQyxZQUFBQSxLQUFBLEVBQUEsS0FGQTtBQUdBQyxZQUFBQSxJQUFBLEVBQUE7QUFIQSxXQUFBO0FBS0EsU0FQQTtBQVFBO0FBbkJBLEtBQUEsQ0FBQTtBQXFCQSxHQWpTQSxDQW1TQTs7O0FBQ0E3QixFQUFBQSxDQUFBLENBQUEsZUFBQSxDQUFBLENBQUFRLEVBQUEsQ0FBQSxPQUFBLEVBQUEsWUFBQTtBQUNBUixJQUFBQSxDQUFBLENBQUEsTUFBQSxDQUFBLENBQUF5RixXQUFBLENBQUEsZ0JBQUE7QUFDQSxHQUZBOztBQUlBLFdBQUFsRixxQkFBQSxHQUFBO0FBQ0EsUUFBQXNHLFlBQUEsR0FBQTdHLENBQUEsQ0FBQSxvQkFBQSxDQUFBLENBQUFxRixXQUFBLEVBQUE7QUFDQS9ELElBQUFBLE9BQUEsQ0FBQUMsR0FBQSxDQUFBc0YsWUFBQTtBQUNBN0csSUFBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOEcsR0FBQSxDQUFBLGdCQUFBLEVBQUFELFlBQUEsR0FBQSxJQUFBO0FBQ0E7O0FBQ0EsTUFBQTdHLENBQUEsQ0FBQSxvQkFBQSxDQUFBLENBQUFNLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQUMsSUFBQUEscUJBQUE7QUFDQTs7QUFFQSxNQUFBUCxDQUFBLENBQUEsYUFBQSxDQUFBLENBQUFNLE1BQUEsR0FBQSxDQUFBLEVBQUE7QUFDQU4sSUFBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxDQUFBK0csVUFBQTtBQUNBO0FBQ0EsQ0FwVEEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiBcclxuXHJcbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgIFxyXG4gICAgc3RpY2t5Q1RBKCk7XHJcbiAgICBpZiAoJChcIi5zZWFyY2gtZmlsdGVyLXRvcFwiKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNhbGNTZXJjaEZpbHRlckhlaWdodCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL2Jvb3RzdHJhcCBtb2RhbHNcclxuXHJcbiAgJChkb2N1bWVudCkub24oXCJoaWRkZW4uYnMubW9kYWxcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQoXCIubW9kYWwuc2hvd1wiKS5sZW5ndGgpIHtcclxuICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJtb2RhbC1vcGVuXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuIFxyXG4gIFxyXG4gXHJcbiBcclxuXHJcbiAgLy9hdXRvIGNvbXBsZXRlXHJcbiAgaWYgKCQoXCIuanMtYXV0b2NvbXBsZXRlXCIpLmxlbmd0aCA+IDApIHtcclxuICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICBkYXRhOiBbXCJibHVlXCIsIFwiZ3JlZW5cIiwgXCJwaW5rXCIsIFwicmVkXCIsIFwieWVsbG93XCJdLFxyXG4gICAgfTtcclxuICAgICQoXCIuanMtYXV0b2NvbXBsZXRlXCIpLmVhc3lBdXRvY29tcGxldGUob3B0aW9ucyk7XHJcbiAgfVxyXG5cclxuICAvL3JhZGlvIGNoZWNrZWQgY29kaXRpb24gZm9yIHVwbG9hZCB2aWRlbyBvciBsaW5rIHZpZGVvXHJcblxyXG4gICQoXCIuanMtcmFkaW8tdG9nZ2xlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGlucHV0ID0gJCh0aGlzKS5maW5kKFwiaW5wdXRcIik7XHJcbiAgICB2YXIgdGFyZ2V0RGl2ID0gaW5wdXQuYXR0cihcImRhdGEtdGFyZ2V0XCIpO1xyXG4gICAgJCh0aGlzKS5jbG9zZXN0KFwiLmNhcmRcIikuZmluZChcIi5qcy1yYWRpby10b2dnbGUtcmVzdWx0c1wiKS5oaWRlKCk7XHJcbiAgICBpZiAoaW5wdXQuaXMoXCI6Y2hlY2tlZFwiKSkge1xyXG4gICAgICAkKFwiI1wiICsgdGFyZ2V0RGl2KS5zaG93KCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgaWYgKCQoXCIuanMtcmFkaW8tdG9nZ2xlXCIpLmxlbmd0aCA+IDApIHtcclxuICAgICQoXCIuanMtcmFkaW8tdG9nZ2xlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoJCh0aGlzKS5maW5kKFwiaW5wdXRcIikuaXMoXCI6Y2hlY2tlZFwiKSkge1xyXG4gICAgICAgIHZhciB0YXJnZXREaXYgPSAkKHRoaXMpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGF0YS10YXJnZXRcIik7XHJcbiAgICAgICAgJChcIiNcIiArIHRhcmdldERpdikuc2hvdygpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRhcmdldERpdik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvL2xpZ2h0b2J4IGZvciBpbWFnZXNcclxuICBpZiAoJChcIi5saWdodGJveFwiKS5sZW5ndGggPiAwKSB7XHJcbiAgICB2YXIgJGdhbGxlcnkgPSBuZXcgU2ltcGxlTGlnaHRib3goXCIubGlnaHRib3hcIiwge30pO1xyXG4gIH1cclxuICAvLyAkKFwiLmpzLXByb3BlcnR5LXZpZGVvXCIpLmxpZ2h0R2FsbGVyeSgpO1xyXG4gIC8vIGxpZ2h0R2FsbGFyeVxyXG4gIGlmICgkKFwiLmxnLWdhbGxhcnlcIikubGVuZ3RoID4gMCkge1xyXG4gICAgJChcIi5sZy1nYWxsYXJ5XCIpLmxpZ2h0R2FsbGVyeSh7XHJcbiAgICAgIHNlbGVjdG9yOiBcIi5qcy1saWdodEdhbGxhcnktc2VsZWN0b3JcIixcclxuICAgICAgc2hhcmU6IGZhbHNlLFxyXG4gICAgICB6b29tOiBmYWxzZSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYgKCQoXCIubGctbW9yZVBob3Rvc1wiKS5sZW5ndGggPiAwKSB7XHJcbiAgICAkKFwiLmxnLW1vcmVQaG90b3NcIikubGlnaHRHYWxsZXJ5KHtcclxuICAgICAgc2VsZWN0b3I6IFwiLml0ZW1cIixcclxuICAgICAgc2hhcmU6IGZhbHNlLFxyXG4gICAgICB6b29tOiBmYWxzZSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gcG9wbHVsYXIgcHJvcGVydGlzZVxyXG4gIGlmICgkKFwiLmpzLXByb3BlcnR5LWNhcm91c2VsLW1vYmlsZVwiKS5sZW5ndGggPiAwKSB7XHJcbiAgICAkKFwiLmpzLXByb3BlcnR5LWNhcm91c2VsLW1vYmlsZVwiKS5zbGljayh7XHJcbiAgICAgIGluZmluaXRlOiBmYWxzZSxcclxuICAgICAgc2xpZGVzVG9TaG93OiAxLjIsXHJcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICBjZW50ZXJNb2RlOiBmYWxzZSxcclxuICAgICAgdmFyaWFibGVXaWR0aDogZmFsc2UsXHJcbiAgICAgIGNlbnRlclBhZGRpbmc6IFwiNjBweFwiLFxyXG4gICAgICBuZXh0QXJyb3c6IGA8YnV0dG9uIGNsYXNzPVwiY2Fyb3VzZWwtYXJyb3cgc2xpY2stbmV4dFwiPjxzdmcgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxyXG4gICAgICA8cGF0aCBkPVwiTTYuMDAwMSA3LjJMMTIuMDAwMSAxMy4yTDE4LjAwMDEgNy4yTDIwLjQwMDEgOC40TDEyLjAwMDEgMTYuOEwzLjYwMDEgOC40TDYuMDAwMSA3LjJaXCIgIC8+XHJcbiAgICAgIDwvc3ZnPjwvYnV0dG9uPlxyXG4gICAgICBgLFxyXG4gICAgICBwcmV2QXJyb3c6IGA8YnV0dG9uIGNsYXNzPVwiY2Fyb3VzZWwtYXJyb3cgc2xpY2stcHJldlwiPjxzdmcgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPlxyXG4gICAgICA8cGF0aCBkPVwiTTYuMDAwMSA3LjJMMTIuMDAwMSAxMy4yTDE4LjAwMDEgNy4yTDIwLjQwMDEgOC40TDEyLjAwMDEgMTYuOEwzLjYwMDEgOC40TDYuMDAwMSA3LjJaXCIgIC8+XHJcbiAgICAgIDwvc3ZnPjwvYnV0dG9uPlxyXG4gICAgICBgLFxyXG4gICAgICBtb2JpbGVGaXJzdDogdHJ1ZSxcclxuICAgICAgcmVzcG9uc2l2ZTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2NyxcclxuXHJcbiAgICAgICAgICBzZXR0aW5nczogXCJ1bnNsaWNrXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9jaGVjayBwYXJlbnQgYW5kIGNoZWNrIGl0cyBjaGlsZHJlbiBjaGVja2JveFxyXG4gICQoXCIuanMtcGFyZW50Q2hlY2tCb3hcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKVxyXG4gICAgICAucGFyZW50cyhcIi5wcm9wZXJ0aWVzLWxpc3RzXCIpXHJcbiAgICAgIC5maW5kKFwiLmpzLWNoaWxkQ2hlY2tCb3hcIilcclxuICAgICAgLnByb3AoXCJjaGVja2VkXCIsIHRoaXMuY2hlY2tlZCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vY2xpY2tpbmcgdGhlIGxhc3QgdW5jaGVja2VkIG9yIGNoZWNrZWQgY2hlY2tib3ggc2hvdWxkIGNoZWNrIG9yIHVuY2hlY2sgdGhlIHBhcmVudCBjaGVja2JveFxyXG4gICQoXCIuanMtY2hpbGRDaGVja0JveFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgcGFyZW50Q29udGFpbmVyID0gXCIucHJvcGVydGllcy1saXN0c1wiO1xyXG4gICAgdmFyIHBhcmVudENoZWNrYm94ID0gXCIuanMtcGFyZW50Q2hlY2tCb3hcIjtcclxuICAgIGlmIChcclxuICAgICAgJCh0aGlzKS5wYXJlbnRzKHBhcmVudENvbnRhaW5lcikuZmluZChwYXJlbnRDaGVja2JveCkucHJvcChcImNoZWNrZWRcIikgPT1cclxuICAgICAgdHJ1ZSAmJlxyXG4gICAgICB0aGlzLmNoZWNrZWQgPT0gZmFsc2VcclxuICAgIClcclxuICAgICAgJCh0aGlzKVxyXG4gICAgICAgIC5wYXJlbnRzKHBhcmVudENvbnRhaW5lcilcclxuICAgICAgICAuZmluZChwYXJlbnRDaGVja2JveClcclxuICAgICAgICAucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpO1xyXG4gICAgaWYgKHRoaXMuY2hlY2tlZCA9PSB0cnVlKSB7XHJcbiAgICAgIHZhciBmbGFnID0gdHJ1ZTtcclxuICAgICAgJCh0aGlzKVxyXG4gICAgICAgIC5wYXJlbnRzKHBhcmVudENvbnRhaW5lcilcclxuICAgICAgICAuZmluZChcIi5qcy1jaGlsZENoZWNrQm94XCIpXHJcbiAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCA9PSBmYWxzZSkgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAkKHRoaXMpXHJcbiAgICAgICAgLnBhcmVudHMocGFyZW50Q29udGFpbmVyKVxyXG4gICAgICAgIC5maW5kKHBhcmVudENoZWNrYm94KVxyXG4gICAgICAgIC5wcm9wKFwiY2hlY2tlZFwiLCBmbGFnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy9wcm9wZXJ0eSBkZXRhaWwgcGFnZTogZGVzY3JpcHRpb24gc2hvdyBtb3JlL2xlc3NcclxuXHJcbiAgdmFyIHNob3dDaGFyID0gMzAwOyAvLyBIb3cgbWFueSBjaGFyYWN0ZXJzIGFyZSBzaG93biBieSBkZWZhdWx0XHJcbiAgdmFyIGVsbGlwc2VzdGV4dCA9IFwiLi4uXCI7XHJcbiAgdmFyIG1vcmV0ZXh0ID0gXCJTaG93IG1vcmUgPlwiO1xyXG4gIHZhciBsZXNzdGV4dCA9IFwiU2hvdyBsZXNzXCI7XHJcblxyXG4gICQoXCIubW9yZVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBjb250ZW50ID0gJCh0aGlzKS5odG1sKCk7XHJcblxyXG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gc2hvd0NoYXIpIHtcclxuICAgICAgdmFyIGMgPSBjb250ZW50LnN1YnN0cigwLCBzaG93Q2hhcik7XHJcbiAgICAgIHZhciBoID0gY29udGVudC5zdWJzdHIoc2hvd0NoYXIsIGNvbnRlbnQubGVuZ3RoIC0gc2hvd0NoYXIpO1xyXG5cclxuICAgICAgdmFyIGh0bWwgPVxyXG4gICAgICAgIGMgK1xyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cIm1vcmVlbGxpcHNlc1wiPicgK1xyXG4gICAgICAgIGVsbGlwc2VzdGV4dCArXHJcbiAgICAgICAgJyZuYnNwOzwvc3Bhbj48c3BhbiBjbGFzcz1cIm1vcmVjb250ZW50XCI+PHNwYW4+JyArXHJcbiAgICAgICAgaCArXHJcbiAgICAgICAgJzwvc3Bhbj4mbmJzcDsmbmJzcDs8YSBocmVmPVwiXCIgY2xhc3M9XCJtb3JlbGlua1wiPicgK1xyXG4gICAgICAgIG1vcmV0ZXh0ICtcclxuICAgICAgICBcIjwvYT48L3NwYW4+XCI7XHJcblxyXG4gICAgICAkKHRoaXMpLmh0bWwoaHRtbCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoXCIubW9yZWxpbmtcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJsZXNzXCIpKSB7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoXCJsZXNzXCIpO1xyXG4gICAgICAkKHRoaXMpLmh0bWwobW9yZXRleHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImxlc3NcIik7XHJcbiAgICAgICQodGhpcykuaHRtbChsZXNzdGV4dCk7XHJcbiAgICB9XHJcbiAgICAkKHRoaXMpLnBhcmVudCgpLnByZXYoKS50b2dnbGUoKTtcclxuICAgICQodGhpcykucHJldigpLnRvZ2dsZSgpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0pO1xyXG5cclxuICAvLyBjaGFydCA6IHByaWNlIGhpc3RvcnlcclxuICBpZiAoJChcIiNwcmljZUNoYXJ0XCIpLmxlbmd0aCA+IDApIHtcclxuICAgIHZhciBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaWNlQ2hhcnRcIik7XHJcbiAgICB2YXIgbXlDaGFydCA9IG5ldyBDaGFydChjdHgsIHtcclxuICAgICAgdHlwZTogXCJsaW5lXCIsXHJcbiAgICAgIGFzcGVjdFJhdGlvOiAyLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgbGFiZWxzOiBbXHJcbiAgICAgICAgICBcIkphblwiLFxyXG4gICAgICAgICAgXCJGZWJcIixcclxuICAgICAgICAgIFwiTWFyXCIsXHJcbiAgICAgICAgICBcIkFwclwiLFxyXG4gICAgICAgICAgXCJNYXlcIixcclxuICAgICAgICAgIFwiSnVuXCIsXHJcbiAgICAgICAgICBcIkp1bFwiLFxyXG4gICAgICAgICAgXCJBdWdcIixcclxuICAgICAgICAgIFwiU2VwXCIsXHJcbiAgICAgICAgICBcIk9jdFwiLFxyXG4gICAgICAgICAgXCJOb3ZcIixcclxuICAgICAgICAgIFwiRGVjXCIsXHJcbiAgICAgICAgXSxcclxuICAgICAgICBkYXRhc2V0czogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBsYWJlbDogXCJQcmljZVwiLFxyXG4gICAgICAgICAgICBkYXRhOiBbMTIsIDE5LCAzLCA1LCAyLCAzLCAxOCwgMjAsIDE2LCAxOSwgMjAsIDIwXSxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNBNkNFRTNcIixcclxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFwiIzQwNjJCQlwiLFxyXG4gICAgICAgICAgICBib3JkZXJXaWR0aDogMSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgXSxcclxuICAgICAgfSxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIHNjYWxlczoge1xyXG4gICAgICAgICAgeUF4ZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRpY2tzOiB7XHJcbiAgICAgICAgICAgICAgICBiZWdpbkF0WmVybzogdHJ1ZSxcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgXSxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdGlja3lDVEEoKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPj0gNzY4KSB7XHJcbiAgICAgIGlmICgkKFwiLnByb3BlcnR5LWRldGFpbC13cmFwcGVyXCIpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPj1cclxuICAgICAgICAgICQoXCIucHJvcGVydHktZGV0YWlsLXdyYXBwZXJcIikub2Zmc2V0KCkudG9wICtcclxuICAgICAgICAgICQoXCIucHJvcGVydHktZGV0YWlsLXdyYXBwZXJcIikub3V0ZXJIZWlnaHQoKSAtXHJcbiAgICAgICAgICB3aW5kb3cuaW5uZXJIZWlnaHRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICQoXCIuZml4ZWQtY3RhXCIpLmFkZENsYXNzKFwicG9zaXRpb24tc3RhdGljXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKFwiLmZpeGVkLWN0YVwiKS5yZW1vdmVDbGFzcyhcInBvc2l0aW9uLXN0YXRpY1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIHN0aWNreUNUQSgpO1xyXG4gIH0pO1xyXG5cclxuICAvL3Nob3cgaGRpZSBsaW5rXHJcbiAgdmFyIHNob3doaWRlID0gZmFsc2U7XHJcbiAgJChcIi5qcy1zaG93aGlkZS1saW5rXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHRhcmdldCA9ICQodGhpcykuYXR0cihcImRhdGEtdGFyZ2V0XCIpO1xyXG4gICAgY29uc29sZS5sb2codGFyZ2V0KTtcclxuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJzaG93aGlkZS1saW5rLS1oYXMtc2hvd25cIik7XHJcbiAgICBpZiAoc2hvd2hpZGUgPT09IGZhbHNlKSB7XHJcbiAgICAgICQoXCIjXCIgKyB0YXJnZXQpLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIik7XHJcbiAgICAgICQoXCIjXCIgKyB0YXJnZXQpLnNsaWRlRG93bigpO1xyXG4gICAgICBzaG93aGlkZSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKFwiI1wiICsgdGFyZ2V0KS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpO1xyXG4gICAgICAkKFwiI1wiICsgdGFyZ2V0KS5zbGlkZVVwKCk7XHJcbiAgICAgIHNob3doaWRlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vZHJhZyBhbmQgZHJvcCBmaWxlIHVzaW5nIGRyb3B6b25lIHBsdWdpblxyXG4gIGlmICgkKFwiI3ByZXZpZXctdGVtcGxhdGVcIikubGVuZ3RoID4gMCkge1xyXG4gICAgdmFyIHByZXZpZXdOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LXRlbXBsYXRlXCIpO1xyXG4gICAgcHJldmlld05vZGUuaWQgPSBcIlwiO1xyXG4gICAgdmFyIHByZXZpZXdUZW1wbGF0ZSA9IHByZXZpZXdOb2RlLnBhcmVudE5vZGUuaW5uZXJIVE1MO1xyXG4gIH1cclxuICBpZiAoJChcIiNkcm9wY29udGFpbmVyXCIpLmxlbmd0aCA+IDApIHtcclxuICAgIHZhciBteURyb3B6b25lID0gbmV3IERyb3B6b25lKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHJvcGNvbnRhaW5lclwiKSwge1xyXG4gICAgICAvLyBNYWtlIHRoZSB3aG9sZSBib2R5IGEgZHJvcHpvbmVcclxuICAgICAgdXJsOiBcIi90YXJnZXQtdXJsXCIsIC8vIFNldCB0aGUgdXJsXHJcbiAgICAgIHRodW1ibmFpbFdpZHRoOiAxNTAsXHJcbiAgICAgIHRodW1ibmFpbEhlaWdodDogMTUwLFxyXG4gICAgICBwYXJhbGxlbFVwbG9hZHM6IDIwLFxyXG4gICAgICBwcmV2aWV3VGVtcGxhdGU6IHByZXZpZXdUZW1wbGF0ZSxcclxuICAgICAgYXV0b1F1ZXVlOiBmYWxzZSwgLy8gTWFrZSBzdXJlIHRoZSBmaWxlcyBhcmVuJ3QgcXVldWVkIHVudGlsIG1hbnVhbGx5IGFkZGVkXHJcbiAgICAgIHByZXZpZXdzQ29udGFpbmVyOiBcIi5kcmFnbmRyb3AtaW1hZ2VzXCIsIC8vIERlZmluZSB0aGUgY29udGFpbmVyIHRvIGRpc3BsYXkgdGhlIHByZXZpZXdzXHJcbiAgICAgIC8vIGNsaWNrYWJsZTogXCIuZmlsZXNVcGxvYWRcIiwgLy8gRGVmaW5lIHRoZSBlbGVtZW50IHRoYXQgc2hvdWxkIGJlIHVzZWQgYXMgY2xpY2sgdHJpZ2dlciB0byBzZWxlY3QgZmlsZXMuXHJcbiAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm9uKFwidGh1bWJuYWlsXCIsIGZ1bmN0aW9uIChmaWxlLCBkYXRhVXJsKSB7XHJcbiAgICAgICAgICAkKFwiLmpzLWxpZ2h0R2FsbGFyeS1zZWxlY3RvclwiKS5hdHRyKFwiaHJlZlwiLCBkYXRhVXJsKTtcclxuICAgICAgICAgICQoXCIubGctZ2FsbGFyeVwiKS5saWdodEdhbGxlcnkoe1xyXG4gICAgICAgICAgICBzZWxlY3RvcjogXCIuanMtbGlnaHRHYWxsYXJ5LXNlbGVjdG9yXCIsXHJcbiAgICAgICAgICAgIHNoYXJlOiBmYWxzZSxcclxuICAgICAgICAgICAgem9vbTogZmFsc2UsXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9zZWFyY2ggcGFnZSBtYXAgdG9nZ2xlXHJcbiAgJChcIi5qcy1tYXBWaWV3ZXJcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKFwiYm9keVwiKS50b2dnbGVDbGFzcyhcImlzLW1hcC12aXNpYmxlXCIpO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBjYWxjU2VyY2hGaWx0ZXJIZWlnaHQoKSB7XHJcbiAgICB2YXIgZmlsdGVySGVpZ2h0ID0gJChcIi5zZWFyY2gtZmlsdGVyLXRvcFwiKS5vdXRlckhlaWdodCgpO1xyXG4gICAgY29uc29sZS5sb2coZmlsdGVySGVpZ2h0KTtcclxuICAgICQoXCI6cm9vdFwiKS5jc3MoXCItLWZpbHRlckhlaWdodFwiLCBmaWx0ZXJIZWlnaHQgKyBcInB4XCIpO1xyXG4gIH1cclxuICBpZiAoJChcIi5zZWFyY2gtZmlsdGVyLXRvcFwiKS5sZW5ndGggPiAwKSB7XHJcbiAgICBjYWxjU2VyY2hGaWx0ZXJIZWlnaHQoKTtcclxuICB9XHJcblxyXG4gIGlmICgkKFwiI3Rva2VuRmllbGRcIikubGVuZ3RoID4gMCkge1xyXG4gICAgJChcIiN0b2tlbkZpZWxkXCIpLnRva2VuZmllbGQoKTtcclxuICB9XHJcbn0pO1xyXG4iXX0=
